(()=>{function e(e,t,i,n,d,s){this.title=e,this.description=t,this.date=i,this.priority=n,this.finished=s||!1,this.projectName=d}const t={today:{},thisWeek:{}};function i(e,i){t[e]||(t[e]={}),t[e][i.title]=i}const n=document.getElementById("today"),d=document.getElementById("thisWeek"),s=document.getElementById("addProjBtn"),a=document.getElementById("projectModal"),c=document.getElementById("submitProject"),l=document.getElementById("projForm"),o=document.getElementById("projName"),r=document.getElementById("projContainer"),m=document.getElementById("addTaskBtn"),u=document.getElementById("descriptionBlock"),v=document.getElementById("overlay"),p=document.getElementById("addTaskForm"),y=document.getElementById("submitTask"),h=document.getElementById("form"),k=document.getElementById("title"),g=document.getElementById("description"),E=document.getElementById("date"),L=document.getElementById("tasksGrid"),f=document.getElementsByName("priority");function B(){p.classList.remove("active"),v.classList.remove("active"),a.classList.remove("active"),u.classList.remove("active")}function I(e,t,i,n){let d=document.createElement(e);return i&&(d.src=i),n&&(d.id=n),t&&t.forEach((e=>{d.classList.add(e)})),d}function T(e,i,n,d,s){let a=I("div",["task",n]),c=I("div",["task_checkbox"]),l=I("input",[e]);l.type="checkbox",l.name=e,l.checked=d,d&&a.classList.add("checked"),l.addEventListener("change",(()=>{l.checked?(a.classList.add("checked"),t[L.className][l.name].finished=!0):(a.classList.remove("checked"),t[L.className][l.name].finished=!1)}));let o=I("div",["task_title"]);o.innerText=e;let r=I("div",["description"]),m=I("button",void 0,void 0,"descBtn");m.addEventListener("click",(()=>{u.innerHTML="";const t=function(e,t,i,n){const d=I("div",["descriptionBlock"]),s=I("p");s.innerText=`Task title: ${e}`;const a=I("p");a.innerText=`Task description: ${t}`;const c=I("p");c.innerText=`Task date: ${i}`;const l=I("p");return l.innerText=`Task is in project: ${n}`,d.append(s,a,c,l),d}(e,s,i,L.className);u.appendChild(t),u.classList.add("active")})),m.innerText="Description";let v=I("div",["task_date"]);v.innerText=i;let p=I("img",["edit"],"./images/pencil.svg"),y=I("img",["delete"],"./images/bin.svg");y.addEventListener("click",(()=>{L.removeChild(a),delete t[L.className][e]})),L.appendChild(a),a.append(c,o,r,v,p,y),c.appendChild(l),r.appendChild(m)}n.addEventListener("click",(()=>{L.classList.contains("today")||(L.innerHTML="",L.className="today",x("today"))})),d.addEventListener("click",(()=>{L.classList.contains("thisWeek")||(L.innerHTML="",L.className="thisWeek",x("thisWeek"))})),m.addEventListener("click",(()=>{v.classList.add("active"),p.classList.add("active")})),v.addEventListener("click",(e=>{e.target===v&&B()})),u.addEventListener("click",(e=>{e.target===u&&B()})),y.addEventListener("click",(t=>{if(t.preventDefault(),""===k.value)return void k.setCustomValidity("Please fill out the task name field");let n;for(let e=0;e<f.length;e++)f[e].checked&&(n=f[e].value);let d=new e(k.value,g.value,E.value,n,L.className);i(L.className,d),T(k.value,E.value,n,!1,g.value),h.reset(),B()})),s.addEventListener("click",(()=>{v.classList.add("active"),a.classList.add("active")})),c.addEventListener("click",(e=>(e.preventDefault(),""===o.value?(o.setCustomValidity("Please fill out the project name field"),void o.reportValidity()):t[o.value]?(o.setCustomValidity("There is already a project with this name. Please use another name for your project"),void o.reportValidity()):(t[o.value]={},function(e){let t=document.createElement("p");t.innerText=e,t.className="projectsNames",t.addEventListener("click",(()=>{L.classList.contains(e)||(L.innerHTML="",L.className=e,x(e))})),r.append(t)}(o.value),l.reset(),B(),void console.log(t)))));let N=new e("work","everyday","2023-02-02","high","today");i("today",N),T(N.title,N.date,N.priority,N.finished,N.description);let j=new e("read","everyday","2023-03-03","medium","today",!0);function x(e){const i=Object.values(t[e]);for(let e=0;e<i.length;e++)T(i[e].title,i[e].date,i[e].priority,i[e].finished)}i("today",j),T(j.title,j.date,j.priority,j.finished,j.description),localStorage.setItem("myItems",JSON.stringify(t))})();