(()=>{function e(e,t,i,n,d,a){this.title=e,this.description=t,this.date=i,this.priority=n,this.finished=a||!1,this.projectName=d}const t={today:{},thisWeek:{}};function i(e,i){t[e]||(t[e]={}),t[e][i.title]=i}const n=document.getElementById("today"),d=document.getElementById("thisWeek"),a=document.getElementById("addProjBtn"),s=document.getElementById("projectModal"),c=document.getElementById("submitProject"),l=document.getElementById("projForm"),o=document.getElementById("projName"),r=document.getElementById("projContainer"),m=document.getElementById("addTaskBtn"),u=document.getElementById("overlay"),v=document.getElementById("addTaskForm"),p=document.getElementById("submitTask"),y=document.getElementById("form"),h=document.getElementById("title"),k=document.getElementById("description"),g=document.getElementById("date"),E=document.getElementById("tasksGrid"),L=document.getElementsByName("priority");function f(){v.classList.remove("active"),u.classList.remove("active"),s.classList.remove("active")}function B(e,t,i,n){let d=document.createElement(e);return i&&(d.src=i),n&&(d.id=n),t&&t.forEach((e=>{d.classList.add(e)})),d}function I(e,i,n,d,a){let s=B("div",["task",n]),c=B("div",["task_checkbox"]),l=B("input",[e]);l.type="checkbox",l.name=e,l.checked=d,d&&s.classList.add("checked"),l.addEventListener("change",(()=>{l.checked?(s.classList.add("checked"),t[E.className][l.name].finished=!0):(s.classList.remove("checked"),t[E.className][l.name].finished=!1)}));let o=B("div",["task_title"]);o.innerText=e;let r=B("div",["description"]),m=B("button",void 0,void 0,"descBtn");m.addEventListener("click",(()=>{const t=function(e,t,i,n){const d=B("div",["descriptionBlock"]),a=B("p");a.innerText=`Task title: ${e}`;const s=B("p");s.innerText=`Task description: ${t}`;const c=B("p");c.innerText=`Task date: ${i}`;const l=B("p");return l.innerText=`Task is in project: ${n}`,d.append(a,s,c,l),d}(e,a,i,E.className);u.appendChild(t),u.classList.add("active")})),m.innerText="Description";let v=B("div",["task_date"]);v.innerText=i;let p=B("img",["edit"],"./images/pencil.svg"),y=B("img",["delete"],"./images/bin.svg");y.addEventListener("click",(()=>{E.removeChild(s),delete t[E.className][e]})),E.appendChild(s),s.append(c,o,r,v,p,y),c.appendChild(l),r.appendChild(m)}n.addEventListener("click",(()=>{E.classList.contains("today")||(E.innerHTML="",E.className="today",j("today"))})),d.addEventListener("click",(()=>{E.classList.contains("thisWeek")||(E.innerHTML="",E.className="thisWeek",j("thisWeek"))})),m.addEventListener("click",(()=>{u.classList.add("active"),v.classList.add("active")})),u.addEventListener("click",(e=>{e.target===u&&f()})),p.addEventListener("click",(t=>{if(t.preventDefault(),""===h.value)return void h.setCustomValidity("Please fill out the task name field");let n;for(let e=0;e<L.length;e++)L[e].checked&&(n=L[e].value);let d=new e(h.value,k.value,g.value,n,E.className);i(E.className,d),I(h.value,g.value,n,!1,k.value),y.reset(),f()})),a.addEventListener("click",(()=>{u.classList.add("active"),s.classList.add("active")})),c.addEventListener("click",(e=>(e.preventDefault(),""===o.value?(o.setCustomValidity("Please fill out the project name field"),void o.reportValidity()):t[o.value]?(o.setCustomValidity("There is already a project with this name. Please use another name for your project"),void o.reportValidity()):(t[o.value]={},function(e){let t=document.createElement("p");t.innerText=e,t.className="projectsNames",t.addEventListener("click",(()=>{E.classList.contains(e)||(E.innerHTML="",E.className=e,j(e))})),r.append(t)}(o.value),l.reset(),f(),void console.log(t)))));let T=new e("work","everyday","2023-02-02","high","today");i("today",T),I(T.title,T.date,T.priority,T.finished,T.description);let N=new e("read","everyday","2023-03-03","medium","today",!0);function j(e){const i=Object.values(t[e]);for(let e=0;e<i.length;e++)I(i[e].title,i[e].date,i[e].priority,i[e].finished)}i("today",N),I(N.title,N.date,N.priority,N.finished,N.description),localStorage.setItem("myItems",JSON.stringify(t))})();