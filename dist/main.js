(()=>{function e(e,t,i,d,a,n){this.title=e,this.description=t,this.date=i,this.priority=d,this.finished=n||!1,this.projectName=a}const t={today:{},thisWeek:{}};function i(e,i){t[e]||(t[e]={}),t[e][i.title]=i}const d=document.getElementById("today"),a=document.getElementById("thisWeek"),n=document.getElementById("addProjBtn"),s=document.getElementById("projectModal"),c=document.getElementById("submitProject"),l=document.getElementById("projForm"),o=document.getElementById("projName"),m=document.getElementById("projContainer"),r=document.getElementById("addTaskBtn"),u=document.getElementById("overlay"),v=document.getElementById("addTaskForm"),y=document.getElementById("submitTask"),h=document.getElementById("form"),p=document.getElementById("title"),g=document.getElementById("description"),k=document.getElementById("date"),E=document.getElementById("tasksGrid"),L=document.getElementsByName("priority");function f(){v.classList.remove("active"),u.classList.remove("active"),s.classList.remove("active")}function B(e,t,i,d){let a=document.createElement(e);return i&&(a.src=i),d&&(a.id=d),t&&t.forEach((e=>{a.classList.add(e)})),a}function I(e,i,d,a){let n=B("div",["task",d]),s=B("div",["task_checkbox"]),c=B("input",[e]);c.type="checkbox",c.name=e,c.checked=a,a&&n.classList.add("checked"),c.addEventListener("change",(()=>{c.checked?(n.classList.add("checked"),t[E.className][c.name].finished=!0):(n.classList.remove("checked"),t[E.className][c.name].finished=!1)}));let l=B("div",["task_title"]);l.innerText=e;let o=B("div",["description"]),m=B("button",[void 0],void 0,"descBtn");m.innerText="Description";let r=B("div",["task_date"]);r.innerText=i;let u=B("img",["edit"],"./images/pencil.svg"),v=B("img",["delete"],"./images/bin.svg");v.addEventListener("click",(()=>{E.removeChild(n),delete t[E.className][e]})),E.appendChild(n),n.append(s,l,o,r,u,v),s.appendChild(c),o.appendChild(m)}d.addEventListener("click",(()=>{E.classList.contains("today")||(E.innerHTML="",E.className="today",j("today"))})),a.addEventListener("click",(()=>{E.classList.contains("thisWeek")||(E.innerHTML="",E.className="thisWeek",j("thisWeek"))})),r.addEventListener("click",(()=>{u.classList.add("active"),v.classList.add("active")})),u.addEventListener("click",(e=>{e.target===u&&f()})),y.addEventListener("click",(t=>{if(t.preventDefault(),""===p.value)return void p.setCustomValidity("Please fill out the task name field");let d;for(let e=0;e<L.length;e++)L[e].checked&&(d=L[e].value);let a=new e(p.value,g.value,k.value,d,E.className);i(E.className,a),I(p.value,k.value,d),h.reset(),f()})),n.addEventListener("click",(()=>{u.classList.add("active"),s.classList.add("active")})),c.addEventListener("click",(e=>(e.preventDefault(),""===o.value?(o.setCustomValidity("Please fill out the project name field"),void o.reportValidity()):t[o.value]?(o.setCustomValidity("There is already a project with this name. Please use another name for your project"),void o.reportValidity()):(t[o.value]={},function(e){let t=document.createElement("p");t.innerText=e,t.className="projectsNames",t.addEventListener("click",(()=>{E.classList.contains(e)||(E.innerHTML="",E.className=e,j(e))})),m.append(t)}(o.value),l.reset(),f(),void console.log(t))))),i("today",new e("work","everyday","2023-02-02","high","today")),I("work","2023-02-02","high");let N=new e("read","everyday","2023-03-03","medium","today",!0);function j(e){const i=Object.values(t[e]);for(let e=0;e<i.length;e++)I(i[e].title,i[e].date,i[e].priority,i[e].finished)}i("today",N),I(N.title,N.date,N.priority,N.finished),localStorage.setItem("myItems",JSON.stringify(t))})();